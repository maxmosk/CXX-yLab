#!/bin/sh
I=1
while IFS=% read -r source exp; do
        res=$(echo $source | $1)
        if [ x"$exp" != x"$res" ]; then
                echo TEST $I '('$source')' FAILED: expexted "$exp", got "$res"

        else
                echo TEST $I PASSED
        fi
        I=$((I+1))
done <<END
    0%0
    1 1%0
    5 1 2 3 4 5%0
    5 1 1 1 1 1%4
    10 1 2 1 2 1 2 1 2 1 2%8
    10 1 2 3 4 5 6 7 8 9 10%0
    20 1 2 3 4 5 6 7 8 9 10 11 9 8 7 6 5 4 3 2 1%9
    21 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 19 7%2
    21 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 1%1
    25 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 11 12 13 14 15 1 3 5 7 9%10
    25 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 10%1
    25 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 5%1
    27 1 2 3 4 5 1 2 3 4 5 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 1 2%7
    30 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 1 21 22 23 24 25 26 27 28 29 30%1
    30 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 10 8 6 4 2 21 22 23 24 25 11 12 13 14 15%10
    30 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30%0
    40 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 1 2 3 4 5 6 7 8 9 10%9
END

